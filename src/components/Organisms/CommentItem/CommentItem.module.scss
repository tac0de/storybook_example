.comment-item {
  @include flex-column();
  background-color: white;
  border: 1px solid $gray-200;
  border-radius: $border-radius-base;
  box-shadow: $shadow-sm;
  overflow: hidden;
  transition: all $transition-base;

  &:hover {
    box-shadow: $shadow-md;
    border-color: $gray-300;
  }

  &:focus-within {
    border-color: $primary-color;
    box-shadow: 0 0 0 2px rgba($primary-color, 0.1);
  }
}

.comment-content {
  @include flex-column();
  padding: $spacing-4;
  gap: $spacing-3;
}

.comment-text {
  @include text-base();
  color: $black;
  line-height: $line-height-relaxed;
  word-wrap: break-word;
  white-space: pre-wrap;
  font-family: $font-family-base;

  // 긴 텍스트 처리
  overflow-wrap: break-word;
  hyphens: auto;

  // 링크 스타일링
  a {
    color: $primary-color;
    text-decoration: none;
    font-weight: $font-weight-medium;

    &:hover {
      text-decoration: underline;
    }

    &:focus {
      @include focus-ring();
    }
  }

  // 코드 블록 스타일링
  code {
    background-color: $gray-100;
    padding: $spacing-1 $spacing-2;
    border-radius: $border-radius-sm;
    font-family: $font-family-mono;
    font-size: $font-size-sm;
    color: $light-color;
  }

  // 인용구 스타일링
  blockquote {
    border-left: 4px solid $gray-300;
    padding-left: $spacing-3;
    margin: $spacing-2 0;
    color: $gray-600;
    font-style: italic;
  }
}

// Responsive styles
@media (max-width: $breakpoint-sm) {
  .comment-item {
    border-radius: $border-radius-sm;
  }

  .comment-content {
    padding: $spacing-3;
    gap: $spacing-2;
  }

  .comment-text {
    @include text-sm();
    line-height: $line-height-normal;
  }
}

// Tablet styles
@media (min-width: $breakpoint-sm) and (max-width: $breakpoint-md) {
  .comment-content {
    padding: $spacing-3;
  }
}

// Reply styles
.replies-container {
  @include flex-column();
  margin-top: $spacing-2;
  gap: $spacing-2;
}

// Depth-based indentation for replies
.comment-item {
  &.depth-1 {
    margin-left: $spacing-6;
    border-left: 2px solid $gray-200;
    padding-left: $spacing-4;
  }

  &.depth-2 {
    margin-left: $spacing-8;
    border-left: 2px solid $gray-300;
    padding-left: $spacing-4;
  }

  &.depth-3 {
    margin-left: $spacing-10;
    border-left: 2px solid $gray-400;
    padding-left: $spacing-4;
  }

  &.depth-4 {
    margin-left: $spacing-12;
    border-left: 2px solid $gray-500;
    padding-left: $spacing-4;
  }
}

// Print styles
@media print {
  .comment-item {
    box-shadow: none;
    border: 1px solid $gray-300;
    break-inside: avoid;
  }

  .comment-content {
    padding: $spacing-2;
  }

  .replies-container {
    margin-top: $spacing-1;
  }
}
